<!DOCTYPE html>
<html>

<head>
    <title>solo-poke</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="Solopoke.png" type="image/png" sizes="64x64">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Hind&display=swap" rel="stylesheet">
</head>

<body>
<content id="chat">
    <transition name="fade">
        <button class="arrow" v-show="showArrowUp" @click="scrollMessages('start', 'smooth')">^</button>
    </transition>

    <ul id="messages" @scroll="onScroll">
        <li class="bubble" v-for="g in messageGroups" :class="{right: g.author != author}" :style="{backgroundColor: g.author == author ? me.color : friend.color}">
            <header class="time">{{ g.time | timeFormat }}</header>
            <p v-for="m in g.messages" v-scroll-jack>{{m.text}}</p>
        </li>
    </ul>
    <transition name="fade">
        <button class="arrow down" v-show="showArrowDown" @click="scrollMessages('end', 'smooth')">v</button>
    </transition>

    <div style="display:flex; flex-direction: column;">
        <span class="bubble right preview" :class="{hidden: !friend.presence.writing, active: friend.presence.writing == true}" :style="{backgroundColor: friend.color}">{{friend.name}} is typing&#x2026;</span>

        <v-textfield @send="send" @input="onInput" @user-function="onUserFunction" :style="{backgroundColor: me.color}"></v-textfield>

        <footer>
            <span>
                <span class="onlineicon" :style="presenceColor(me)">&#x2B24;</span>
                {{me.name}}
            </span>
            <span>
                <span class="onlineicon" :style="presenceColor(friend)">&#x2764;</span>
                {{friend.name}}
            </span>
        </footer>
    </div>

</content>


<script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-database.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script src="backend.js"></script>
<script src="components.js"></script>
<script src="app.js"></script>

<audio id="fwib" src="fwib2.wav"></audio>

</body>

</html>
